<Window x:Class="TravelAgency.WPF.Views.AgentWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Agent - Package Management"
        Height="720" Width="1100"
        Background="#F6F7FB">

	<Grid Margin="18">
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="420"/>
			<ColumnDefinition Width="18"/>
			<ColumnDefinition Width="*"/>
		</Grid.ColumnDefinitions>

		<!-- LEFT -->
		<Border Grid.Column="0"
                Background="White"
                CornerRadius="14"
                Padding="16"
                BorderBrush="#E5E7EB"
                BorderThickness="1">
			<Border.Effect>
				<DropShadowEffect BlurRadius="14" ShadowDepth="2" Opacity="0.12"/>
			</Border.Effect>

			<StackPanel>
				<TextBlock Text="Create Trip Package"
                           FontSize="20"
                           FontWeight="SemiBold"
                           Margin="0,0,0,10"/>

				<TextBlock Text="Trip Type" FontWeight="SemiBold" Margin="0,10,0,4"/>
				<ComboBox Height="34"
                          SelectedValuePath="Content"
                          SelectedValue="{Binding TripType, Mode=TwoWay}">
					<ComboBoxItem Content="Budget"/>
					<ComboBoxItem Content="Premium"/>
				</ComboBox>

				<TextBlock Text="Transport" FontWeight="SemiBold" Margin="0,10,0,4"/>
				<ComboBox Height="34"
                          SelectedValuePath="Content"
                          SelectedValue="{Binding TransportType, Mode=TwoWay}">
					<ComboBoxItem Content="Plane"/>
					<ComboBoxItem Content="Bus"/>
					<ComboBoxItem Content="Train"/>
				</ComboBox>

				<TextBlock Text="Package Name" FontWeight="SemiBold" Margin="0,10,0,4"/>
				<TextBox Height="34"
                         Text="{Binding Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>

				<TextBlock Text="Base Price" FontWeight="SemiBold" Margin="0,10,0,4"/>
				<TextBox Height="34"
                         Text="{Binding PriceText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>

				<Separator Margin="0,14,0,14"/>

				<StackPanel Orientation="Horizontal">
					<Button Content="Create (Quick)"
                            Height="38" Padding="14,0"
                            Margin="0,0,10,0"
                            Command="{Binding CreateQuickCommand}"/>

					<Button Content="Create (Custom / Builder)"
                            Height="38" Padding="14,0"
                            Command="{Binding CreateCustomCommand}"/>
				</StackPanel>

				<Button Content="Clone Selected"
                        Height="38" Margin="0,10,0,0"
                        Command="{Binding CloneCommand}"/>

				<Button Content="Reload from DB"
                        Height="38" Margin="0,10,0,0"
                        Command="{Binding ReloadCommand}"/>

				<Border Margin="0,14,0,0"
                        Background="#F3F4F6"
                        CornerRadius="10"
                        Padding="10"
                        BorderBrush="#E5E7EB"
                        BorderThickness="1">
					<TextBlock Text="{Binding Status}" TextWrapping="Wrap"/>
				</Border>
			</StackPanel>
		</Border>

		<!-- RIGHT -->
		<Border Grid.Column="2"
                Background="White"
                CornerRadius="14"
                Padding="16"
                BorderBrush="#E5E7EB"
                BorderThickness="1">
			<Border.Effect>
				<DropShadowEffect BlurRadius="14" ShadowDepth="2" Opacity="0.12"/>
			</Border.Effect>

			<Grid>
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto"/>
					<RowDefinition Height="*"/>
				</Grid.RowDefinitions>

				<DockPanel Grid.Row="0" Margin="0,0,0,10">
					<TextBlock Text="Trips created"
                               FontSize="18"
                               FontWeight="SemiBold"
                               DockPanel.Dock="Left"/>
				</DockPanel>

				<ListBox Grid.Row="1"
                         ItemsSource="{Binding Trips}"
                         SelectedItem="{Binding SelectedTrip, Mode=TwoWay}"
                         Background="Transparent"
                         BorderThickness="0"
                         ScrollViewer.HorizontalScrollBarVisibility="Disabled">

					<ListBox.ItemTemplate>
						<DataTemplate>
							<Border CornerRadius="12"
                                    Padding="12"
                                    Margin="0,0,0,10"
                                    Background="White"
                                    BorderBrush="#E5E7EB"
                                    BorderThickness="1">
								<Border.Effect>
									<DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.10"/>
								</Border.Effect>

								<StackPanel>
									<TextBlock Text="{Binding Name}" FontSize="16" FontWeight="SemiBold"/>
									<TextBlock Margin="0,4,0,0"
                                               Foreground="#444"
                                               Text="{Binding Price, StringFormat=Price: {0:F2}}"/>

									<TextBlock Margin="0,2,0,0" Foreground="#444">
										<Run Text="Season: " />
										<Run Text="{Binding Season.Name}" />
										<Run Text=" (" />
										<Run Text="{Binding Season.StartDate, StringFormat={}{0:yyyy-MM-dd}}" />
										<Run Text=" → " />
										<Run Text="{Binding Season.EndDate, StringFormat={}{0:yyyy-MM-dd}}" />
										<Run Text=")" />
									</TextBlock>

									<TextBlock Margin="0,8,0,0" Foreground="#222">
										<Run Text="Transport: " FontWeight="SemiBold"/>
										<Run Text="{Binding TransportName, Mode=OneWay}" />
										<Run Text="   |   " />
										<Run Text="Stay: " FontWeight="SemiBold"/>
										<Run Text="{Binding StayName, Mode=OneWay}" />
									</TextBlock>

									<TextBlock Margin="0,8,0,2"
                                               FontWeight="SemiBold"
                                               Foreground="#222"
                                               Text="Extras:"/>

									<ItemsControl ItemsSource="{Binding ExtraServiceNames, Mode=OneWay}">
										<ItemsControl.ItemsPanel>
											<ItemsPanelTemplate>
												<WrapPanel />
											</ItemsPanelTemplate>
										</ItemsControl.ItemsPanel>
										<ItemsControl.ItemTemplate>
											<DataTemplate>
												<Border CornerRadius="12"
                                                        Padding="8,3"
                                                        Margin="0,0,6,6"
                                                        Background="#EEF2FF"
                                                        BorderBrush="#CBD5E1"
                                                        BorderThickness="1">
													<TextBlock Text="{Binding}" FontSize="12" />
												</Border>
											</DataTemplate>
										</ItemsControl.ItemTemplate>
									</ItemsControl>
								</StackPanel>
							</Border>
						</DataTemplate>
					</ListBox.ItemTemplate>
				</ListBox>
			</Grid>
		</Border>
	</Grid>
</Window>